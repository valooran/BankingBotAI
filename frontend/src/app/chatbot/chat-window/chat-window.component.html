<!-- Toggle Button -->
<div class="fixed bottom-4 right-4 z-50">
  <button
    (click)="toggleChat()"
    class="bg-blue-600 text-white p-3 rounded-full shadow-lg hover:scale-105 transition-transform"
    aria-label="Chat"
  >
    ğŸ’¬
  </button>
</div>

<!-- Chat Window -->
<div
  *ngIf="isOpen"
  class="fixed bottom-20 right-4 z-50 w-80 max-h-[32rem] flex flex-col
         bg-white/30 backdrop-blur-lg border border-white/20 rounded-2xl shadow-2xl"
>
  <!-- Header -->
  <div class="bg-blue-600 text-white px-4 py-2 font-bold rounded-t-2xl flex items-center gap-2">
    ğŸ§  <span>Banking Assistant</span>
  </div>

  <!-- Messages -->
  <div class="flex-1 overflow-y-auto p-3 space-y-2 text-sm text-gray-800">
    <div *ngFor="let msg of messages" class="bg-white/60 rounded-md px-3 py-2 shadow">
      <div class="font-semibold text-blue-700">{{ msg.sender }}</div>
      <div>{{ msg.text }}</div>
    </div>
  </div>

  <!-- Input -->
  <div class="flex items-center p-2 border-t border-white/20 bg-white/40 rounded-b-2xl">
    <input
      [(ngModel)]="userInput"
      (keydown.enter)="sendMessage()"
      class="flex-1 p-2 rounded-lg border border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
      placeholder="Ask me something..."
    />
    <button
      (click)="sendMessage()"
      class="ml-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition"
    >
      Send
    </button>
  </div>

  <!-- Footer -->
  <div class="flex justify-between items-center px-3 py-1 text-xs text-gray-600 bg-white/30">
    <span>Chat is private to your session</span>
    <button (click)="clearMessages()" class="text-blue-500 hover:underline">Clear Chat</button>
  </div>
</div>
